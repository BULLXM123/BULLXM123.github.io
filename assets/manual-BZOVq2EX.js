import{u as I}from"./index-DyiAMGIZ.js";import{u as y,k as F,m as t,l as n,N as k,q as h,p as V,r as c}from"./ui-vendor-bYSxkbvo.js";import{A as B}from"./AlertCircleOutline-C052Kwii.js";import{C as R}from"./CloudUpload-jfh8uwlP.js";import{k as q,r as v,e as z,X as g,$ as l,N as e,Z as o,V as i,W as $,Y as A,j as b,U as T}from"./vue-vendor-CjWJpnUV.js";import{_ as M}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./utils-C42QaX6I.js";const S={class:"optional-fields"},j={class:"form-actions"},O=q({__name:"manual",emits:["cancel","ok"],setup(W,{emit:_}){const p=_,N=()=>{p("cancel")},d=I(),f=y(),U=v(),u=v(!1),a=z({name:"",base64Token:"",server:"",wsUrl:""}),w={name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:1,max:50,message:"名称长度应在1到50个字符之间",trigger:"blur"}],base64Token:[{required:!0,message:"请输入Token字符串",trigger:"blur"},{min:20,message:"Token字符串长度应至少20个字符",trigger:"blur"}]},C=()=>{u.value=!0;try{d.addToken({name:a.name,token:a.base64Token,server:a.server,wsUrl:a.wsUrl}),f.success("Token添加成功"),a.name="",a.base64Token="",a.server="",a.wsUrl="",p("ok")}catch(m){f.error(`添加Token失败: ${m.message||m}`)}finally{u.value=!1}};return(m,r)=>{const x=$("n-popover");return T(),g(e(F),{ref_key:"importFormRef",ref:U,model:a,rules:w,"label-placement":"top",size:"large","show-label":!0},{default:l(()=>[o(e(n),{label:"游戏角色名称",path:"name","show-label":!0},{default:l(()=>[o(e(t),{value:a.name,"onUpdate:value":r[0]||(r[0]=s=>a.name=s),placeholder:"例如：主号战士",clearable:""},null,8,["value"])]),_:1}),o(e(n),{label:"Token字符串",path:"base64Token","show-label":!0},{default:l(()=>[o(e(t),{value:a.base64Token,"onUpdate:value":r[1]||(r[1]=s=>a.base64Token=s),type:"textarea",rows:3,placeholder:"粘贴Token字符串...",clearable:""},{suffix:l(()=>[o(x,{placement:"right",trigger:"hover"},{trigger:l(()=>[o(e(k),{depth:1},{default:l(()=>[o(e(B))]),_:1})]),default:l(()=>[r[4]||(r[4]=i("div",{class:"large-text"},' 输入格式为：{"roleToken":"****","sessId":***,"connId":***,"isRestore":***} ',-1))]),_:1})]),_:1},8,["value"])]),_:1}),o(e(V),null,{default:l(()=>[o(e(h),{title:"角色详情 (可选)",name:"optional"},{default:l(()=>[i("div",S,[o(e(n),{label:"服务器"},{default:l(()=>[o(e(t),{value:a.server,"onUpdate:value":r[2]||(r[2]=s=>a.server=s),placeholder:"服务器名称"},null,8,["value"])]),_:1}),o(e(n),{label:"自定义连接地址"},{default:l(()=>[o(e(t),{value:a.wsUrl,"onUpdate:value":r[3]||(r[3]=s=>a.wsUrl=s),placeholder:"留空使用默认连接"},null,8,["value"])]),_:1})])]),_:1})]),_:1}),i("div",j,[o(e(c),{type:"primary",size:"large",block:"",loading:u.value,onClick:C},{icon:l(()=>[o(e(k),null,{default:l(()=>[o(e(R))]),_:1})]),default:l(()=>[r[5]||(r[5]=b(" 添加Token ",-1))]),_:1},8,["loading"]),e(d).hasTokens?(T(),g(e(c),{key:0,size:"large",block:"",onClick:N},{default:l(()=>[...r[6]||(r[6]=[b(" 取消 ",-1)])]),_:1})):A("",!0)])]),_:1},8,["model"])}}}),J=M(O,[["__scopeId","data-v-fcbba1e2"]]);export{J as default};
