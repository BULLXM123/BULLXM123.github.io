import{T as Ie,H as Q}from"./ThemeToggle-5sndPx8L.js";import{k as ae,c as F,i as y,a as c,l as De,n as Y,b as s,C as Ve,F as oe,p as Ge,q as He,s as qe,r as $,v as Je,x as Xe,o as Ye,y as M,e as z,w as n,u,d as x,g as ve,z as ge,A as ee,f as Ze,j as f,N as b,t as U,B as V,D as A}from"./index-B43nJ9cn.js";import{_ as Ke}from"./xiaoyugan-CodOW0Y3.js";import Qe from"./manual-lJ_jSikZ.js";import et from"./url-Cp0phgUU.js";import{E as tt,B as st,T as nt}from"./bin-Bvg5IUjd.js";import{_ as ot}from"./plugin-vueexport-helper-DlAUqK2U.js";import{M as at,C as lt}from"./index-p67lu0m7.js";import{C as rt,S as it,T as ut,a as ct}from"./index-Bh2dIWeU.js";import{A as ke}from"./Add-DkkU162Q.js";import{M as dt}from"./Menu-f0trHn6d.js";import{g as _e,s as be,a as we,b as mt,i as ye,c as pt,B as ft}from"./index-DtdF4kCV.js";import{R as te}from"./Refresh-Bxu-HJYJ.js";import{E as Te}from"./EllipsisHorizontal-Crd4UaxG.js";import"./AlertCircleOutline-BIyHhV5w.js";import"./CloudUpload-CEiql101.js";import"./index-Cr-HcRdn.js";import"./render-function-Bqf4SGyP.js";const vt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},gt=c("path",{d:"M394 480a16 16 0 0 1-9.39-3L256 383.76L127.39 477a16 16 0 0 1-24.55-18.08L153 310.35L23 221.2a16 16 0 0 1 9-29.2h160.38l48.4-148.95a16 16 0 0 1 30.44 0l48.4 149H480a16 16 0 0 1 9.05 29.2L359 310.35l50.13 148.53A16 16 0 0 1 394 480z",fill:"currentColor"},null,-1),kt=[gt],yt=ae({name:"Star",render:function(a,d){return y(),F("svg",vt,kt)}}),Tt=["red","orangered","orange","gold","lime","green","cyan","arcoblue","purple","pinkpurple","magenta","gray"],_t=["normal","processing","success","warning","danger"];var se=ae({name:"Badge",props:{text:{type:String},dot:{type:Boolean},dotStyle:{type:Object},maxCount:{type:Number,default:99},offset:{type:Array,default:()=>[]},color:{type:String},status:{type:String,validator:i=>_t.includes(i)},count:{type:Number}},setup(i,{slots:a}){const{status:d,color:l,dotStyle:E,offset:r,text:v,dot:T,maxCount:_,count:w}=De(i),p=_e("badge"),S=bt(p,d==null?void 0:d.value,a==null?void 0:a.default),N=Y(()=>{const h={...(E==null?void 0:E.value)||{}},[m,R]=(r==null?void 0:r.value)||[];m&&(h.marginRight=`${-m}px`),R&&(h.marginTop=`${R}px`);const j=!(l!=null&&l.value)||Tt.includes(l==null?void 0:l.value)?{}:{backgroundColor:l.value};return{mergedStyle:{...j,...h},computedDotStyle:h,computedColorStyle:j}}),O=()=>{const h=v==null?void 0:v.value,m=l==null?void 0:l.value,R=d==null?void 0:d.value,j=T==null?void 0:T.value,P=Number(w==null?void 0:w.value),I=(w==null?void 0:w.value)!=null,{computedDotStyle:G,mergedStyle:D}=N.value;return a.content?s("span",{class:`${p}-custom-dot`,style:G},[a.content()]):h&&!m&&!R?s("span",{class:`${p}-text`,style:G},[h]):R||m&&!I?s("span",{class:`${p}-status-wrapper`},[s("span",{class:[`${p}-status-dot`,{[`${p}-status-${R}`]:R,[`${p}-color-${m}`]:m}],style:D},null),h&&s("span",{class:`${p}-status-text`},[h])]):(j||m)&&P>0?s("span",{class:[`${p}-dot`,{[`${p}-color-${m}`]:m}],style:D},null):P===0?null:s("span",{class:`${p}-number`,style:D},[s("span",null,[_.value&&P>_.value?`${_.value}+`:P])])};return()=>s("span",{class:S.value},[a.default&&a.default(),O()])}});const bt=(i,a,d)=>Y(()=>[i,{[`${i}-status`]:a,[`${i}-no-children`]:!d}]),wt=Object.assign(se,{install:(i,a)=>{be(i,a);const d=we(a);i.component(d+se.name,se)}});var ne=ae({name:"Space",props:{align:{type:String},direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:"small"},wrap:{type:Boolean},fill:{type:Boolean}},setup(i,{slots:a}){const d=_e("space"),l=Y(()=>{var T;return(T=i.align)!=null?T:i.direction==="horizontal"?"center":""}),E=Y(()=>[d,{[`${d}-${i.direction}`]:i.direction,[`${d}-align-${l.value}`]:l.value,[`${d}-wrap`]:i.wrap,[`${d}-fill`]:i.fill}]);function r(T){if(pt(T))return T;switch(T){case"mini":return 4;case"small":return 8;case"medium":return 16;case"large":return 24;default:return 8}}const v=T=>{const _={},w=`${r(ye(i.size)?i.size[0]:i.size)}px`,p=`${r(ye(i.size)?i.size[1]:i.size)}px`;return T?i.wrap?{marginBottom:p}:{}:(i.direction==="horizontal"&&(_.marginRight=w),(i.direction==="vertical"||i.wrap)&&(_.marginBottom=p),_)};return()=>{var T;const _=mt((T=a.default)==null?void 0:T.call(a),!0).filter(w=>w.type!==Ve);return s("div",{class:E.value},[_.map((w,p)=>{var S,N;const O=a.split&&p>0;return s(oe,{key:(S=w.key)!=null?S:`item-${p}`},[O&&s("div",{class:`${d}-item-split`,style:v(!1)},[(N=a.split)==null?void 0:N.call(a)]),s("div",{class:`${d}-item`,style:v(p===_.length-1)},[w])])})])}}});const ht=Object.assign(ne,{install:(i,a)=>{be(i,a);const d=we(a);i.component(d+ne.name,ne)}}),St={class:"token-import-page"},Ct={class:"container"},$t={class:"page-header"},xt={class:"header-content"},Ut={class:"header-top"},Bt={class:"card-header"},Mt={class:"card-body"},zt={key:0,class:"tokens-section"},At={class:"section-header"},Et={class:"header-actions"},Nt={key:0,class:"tokens-grid"},Rt={class:"token-display"},Ot={class:"token-value"},Lt={class:"token-timestamps"},Ft={class:"timestamp-item"},Pt={class:"timestamp-value"},Wt={class:"timestamp-item"},jt={class:"timestamp-value"},It={class:"storage-info"},Dt={class:"storage-item"},Vt={key:0,class:"storage-upgrade"},Gt={key:1,class:"tokens-list"},Ht={style:{"min-width":"120px"}},qt={style:{"font-weight":"bold","font-size":"1.1em","margin-right":"8px"}},Jt={style:{"min-width":"100px"}},Xt={class:"modal-actions"},Yt={__name:"index",props:{token:String,name:String,server:String,wsUrl:String,api:String,auto:Boolean},setup(i){const a=i,d=Ze(),l=Ge(),E=He(),r=qe(),v=$(!1),T=$(!1),_=$(!1);$(null),$(null);const w=$(null),p=$(null),S=$("manual"),N=$(new Set),O=$(new Set),h=$("card"),m=Je({name:"",token:"",server:"",wsUrl:""}),R={name:[{required:!0,message:"请输入Token名称",trigger:"blur"}],token:[{required:!0,message:"请输入Token字符串",trigger:"blur"}]},j=[{label:"导出所有Token",key:"export"},{label:"导入Token文件",key:"import"},{label:"清理过期Token",key:"clean"},{label:"断开所有连接",key:"disconnect"},{label:"清除所有Token",key:"clear"}],P=()=>{v.value=!0},I=async t=>{N.value.add(t.id);try{if(t.sourceUrl){let e;if(t.sourceUrl.startsWith(window.location.origin)||t.sourceUrl.startsWith("/")||t.sourceUrl.startsWith("http://localhost")||t.sourceUrl.startsWith("http://127.0.0.1"))e=await fetch(t.sourceUrl);else try{e=await fetch(t.sourceUrl,{method:"GET",headers:{Accept:"application/json"},mode:"cors"})}catch(W){throw new Error(`跨域请求被阻止。请确保目标服务器支持CORS。错误详情: ${W.message}`)}if(!e.ok)throw new Error(`请求失败: ${e.status} ${e.statusText}`);const g=await e.json();if(!g.token)throw new Error("返回数据中未找到token字段");r.updateToken(t.id,{token:g.token,server:g.server||t.server,lastRefreshed:Date.now()}),l.success("Token刷新成功")}else{E.info({title:"重新获取Token",content:`Token "${t.name}" 是手动导入的，没有配置自动刷新地址。

请选择以下操作：
1. 重新手动导入新的Token
2. 尝试重新连接现有Token`,positiveText:"重新导入",negativeText:"重新连接",onPositiveClick:()=>{v.value=!0,S.value="manual",importForm.name=t.name,importForm.server=t.server,importForm.wsUrl=t.wsUrl},onNegativeClick:()=>{r.getWebSocketStatus(t.id)==="connected"&&r.closeWebSocketConnection(t.id),setTimeout(()=>{r.createWebSocketConnection(t.id,t.token,t.wsUrl),l.info("正在尝试重新连接...")},500)}});return}r.getWebSocketStatus(t.id)==="connected"&&(r.closeWebSocketConnection(t.id),setTimeout(()=>{r.createWebSocketConnection(t.id,t.token,t.wsUrl)},500))}catch(e){console.error("刷新Token失败:",e),l.error(e.message||"Token刷新失败")}finally{N.value.delete(t.id)}},G=t=>{E.warning({title:"升级为长期有效",content:`确认要将Token "${t.name}" 升级为长期有效吗？升级后该Token将不会因24小时未使用而被自动清理。`,positiveText:"确认升级",negativeText:"取消",onPositiveClick:()=>{r.upgradeTokenToPermanent(t.id)?l.success(`Token "${t.name}" 已升级为长期有效！`):l.error("升级失败，该Token可能已经是长期有效状态")}})},D=(t,e=!1)=>{const k=ee.value===t.id,g=H(t.id);if(k&&g==="connected"&&!e){l.info(`${t.name} 已选中且已连接`);return}if(k&&g==="connecting"&&!e){l.info(`${t.name} 正在连接中...`);return}r.selectToken(t.id,e)?e?l.success(`强制重连：${t.name}`):k?l.success(`重新连接：${t.name}`):l.success(`已选择：${t.name}`):l.error(`选择Token失败：${t.name}`)},H=t=>r.getWebSocketStatus(t),le=t=>{const e=H(t);return{connected:"已连接",connecting:"连接中...",disconnected:"已断开",error:"连接错误",disconnecting:"断开中..."}[e]||"未连接"},re=t=>{const e=H(t);return{connected:"success",connecting:"processing",disconnected:"normal",error:"danger",disconnecting:"warning"}[e]||"normal"},ie=t=>{const e=[{label:"编辑",key:"edit",icon:()=>A(b,null,{default:()=>A(ct)})},{label:"复制Token",key:"copy",icon:()=>A(b,null,{default:()=>A(lt)})}];return t.importMethod==="url"&&t.sourceUrl?e.push({label:"从URL刷新",key:"refresh-url",icon:()=>A(b,null,{default:()=>A(it)})}):e.push({label:"重新获取",key:"refresh",icon:()=>A(b,null,{default:()=>A(te)})}),e.push({type:"divider"},{label:"删除",key:"delete",icon:()=>A(b,null,{default:()=>A(ut)}),props:{style:{color:"#e74c3c"}}}),e},ue=async(t,e)=>{switch(t){case"edit":he(e);break;case"copy":Ce(e);break;case"refresh":I(e);break;case"refresh-url":I(e);break;case"delete":$e(e);break}},he=t=>{p.value=t,Object.assign(m,{name:t.name,token:t.token,server:t.server||"",wsUrl:t.wsUrl||""}),_.value=!0},Se=async()=>{if(!(!w.value||!p.value))try{await w.value.validate(),r.updateToken(p.value.id,{name:m.name,token:m.token,server:m.server,wsUrl:m.wsUrl}),l.success("Token信息已更新"),_.value=!1,p.value=null}catch{}},Ce=async t=>{try{await navigator.clipboard.writeText(t.token),l.success("Token已复制到剪贴板")}catch{l.error("复制失败")}},$e=t=>{E.warning({title:"删除Token",content:`确定要删除Token "${t.name}" 吗？此操作无法恢复。`,positiveText:"确定删除",negativeText:"取消",onPositiveClick:()=>{r.removeToken(t.id),l.success("Token已删除")}})},xe=t=>{switch(t){case"export":Ue();break;case"import":Be();break;case"clean":Me();break;case"disconnect":ze();break;case"clear":Ae();break}},Ue=()=>{try{const t=r.exportTokens(),e=JSON.stringify(t,null,2),k=new Blob([e],{type:"application/json"}),g=document.createElement("a");g.href=URL.createObjectURL(k),g.download=`tokens_backup_${new Date().toISOString().split("T")[0]}.json`,g.click(),l.success("Token数据已导出")}catch{l.error("导出失败")}},Be=()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=e=>{const k=e.target.files[0];if(k){const g=new FileReader;g.onload=W=>{try{const q=JSON.parse(W.target.result),L=r.importTokens(q);L.success?l.success(L.message):l.error(L.message)}catch{l.error("文件格式错误")}},g.readAsText(k)}},t.click()},Me=()=>{const t=r.cleanExpiredTokens();l.success(`已清理 ${t} 个过期Token`)},ze=()=>{r.gameTokens.forEach(t=>{r.closeWebSocketConnection(t.id)}),l.success("所有连接已断开")},Ae=()=>{E.error({title:"清除所有Token",content:"确定要清除所有Token吗？此操作无法恢复！",positiveText:"确定清除",negativeText:"取消",onPositiveClick:()=>{r.clearAllTokens(),l.success("所有Token已清除")}})},Ee=t=>{if(!t)return"";const e=t.length;return e<=8?t:t.substring(0,4)+"***"+t.substring(e-4)},ce=t=>new Date(t).toLocaleString("zh-CN"),Ne=()=>{d.push("/admin/dashboard")},de=async t=>{O.value.add(t.id);try{if(r.selectToken(t.id),H(t.id)==="connected"){l.success(`${t.name} 已连接，进入任务管理`),d.push("/admin/dashboard");return}}finally{O.value.delete(t.id)}},me=async()=>{if(a.token||a.api)try{T.value=!0;let t=null;if(a.api){l.info("正在从API获取token...");const e=await fetch(a.api,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});if(!e.ok)throw new Error(`API请求失败: ${e.status} ${e.statusText}`);const k=await e.json();if(!k.token)throw new Error("API返回数据中未找到token字段");t=r.importBase64Token(a.name||k.name||"通过API导入的Token",k.token,{server:a.server||k.server,wsUrl:a.wsUrl,sourceUrl:a.api,importMethod:"url"})}else a.token&&(l.info("正在导入token..."),t=r.importBase64Token(a.name||"通过URL导入的Token",a.token,{server:a.server,wsUrl:a.wsUrl,importMethod:"url"}));if(t&&t.success)l.success(`Token "${t.tokenName}" 导入成功！`),a.auto&&t.token?(r.selectToken(t.token.id),l.success("正在跳转到控制台..."),setTimeout(()=>{d.push("/admin/dashboard")},1500)):d.replace("/tokens");else throw new Error((t==null?void 0:t.message)||"Token导入失败")}catch(t){console.error("URL参数处理失败:",t),l.error(`导入失败: ${t.message}`),d.replace("/tokens")}finally{T.value=!1}};return Xe(()=>[a.token,a.api],me,{immediate:!1}),Ye(async()=>{r.initTokenStore(),await me(),!r.hasTokens&&!a.token&&!a.api&&(v.value=!0)}),(t,e)=>{const k=Ie,g=x("n-radio-button"),W=x("n-radio-group"),q=at,L=x("n-space"),C=x("n-button"),Z=x("n-dropdown"),Re=nt,pe=wt,Oe=ht,fe=ft,K=x("n-tag"),Le=rt,Fe=x("n-card"),Pe=tt,J=x("n-input"),X=x("n-form-item"),We=x("n-form"),je=x("n-modal");return y(),F("div",St,[c("div",Ct,[c("div",$t,[c("div",xt,[c("div",Ut,[e[17]||(e[17]=c("img",{src:Ke,alt:"XYZW",class:"brand-logo"},null,-1)),s(k)]),e[18]||(e[18]=c("h1",null,"游戏Token管理",-1))])]),s(q,{visible:v.value,"onUpdate:visible":e[7]||(e[7]=o=>v.value=o),width:"40rem",footer:!1,"default-visible":!u(r).hasTokens},{title:n(()=>[c("h2",null,[s(u(b),null,{default:n(()=>[s(u(ke))]),_:1}),e[19]||(e[19]=f(" 添加游戏Token ",-1))])]),default:n(()=>[c("div",Bt,[s(W,{value:S.value,"onUpdate:value":e[0]||(e[0]=o=>S.value=o),class:"import-method-tabs",size:"small"},{default:n(()=>[s(g,{value:"manual"},{default:n(()=>[...e[20]||(e[20]=[f(" 手动输入 ",-1)])]),_:1}),s(g,{value:"url"},{default:n(()=>[...e[21]||(e[21]=[f(" URL获取 ",-1)])]),_:1}),s(g,{value:"bin"},{default:n(()=>[...e[22]||(e[22]=[f(" BIN获取 ",-1)])]),_:1})]),_:1},8,["value"])]),c("div",Mt,[S.value==="manual"?(y(),z(Qe,{key:0,onCancel:e[1]||(e[1]=()=>v.value=!1),onOk:e[2]||(e[2]=()=>v.value=!1)})):M("",!0),S.value==="url"?(y(),z(et,{key:1,onCancel:e[3]||(e[3]=()=>v.value=!1),onOk:e[4]||(e[4]=()=>v.value=!1)})):M("",!0),S.value==="bin"?(y(),z(st,{key:2,onCancel:e[5]||(e[5]=()=>v.value=!1),onOk:e[6]||(e[6]=()=>v.value=!1)})):M("",!0)])]),_:1},8,["visible","default-visible"]),u(r).hasTokens?(y(),F("div",zt,[c("div",At,[s(L,{align:"center"},{default:n(()=>[c("h2",null,"我的Token列表 ("+U(u(r).gameTokens.length)+"个)",1),s(W,{value:h.value,"onUpdate:value":e[8]||(e[8]=o=>h.value=o),size:"small"},{default:n(()=>[s(g,{value:"card"},{default:n(()=>[...e[23]||(e[23]=[f("卡片",-1)])]),_:1}),s(g,{value:"list"},{default:n(()=>[...e[24]||(e[24]=[f("列表",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),c("div",Et,[u(r).selectedToken?(y(),z(C,{key:0,type:"success",onClick:Ne},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(Q))]),_:1})]),default:n(()=>[e[25]||(e[25]=f(" 返回控制台 ",-1))]),_:1})):M("",!0),v.value?M("",!0):(y(),z(C,{key:1,type:"primary",onClick:e[9]||(e[9]=o=>v.value=!0)},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(ke))]),_:1})]),default:n(()=>[e[26]||(e[26]=f(" 添加Token ",-1))]),_:1})),s(Z,{options:j,onSelect:xe},{default:n(()=>[s(C,null,{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(dt))]),_:1})]),default:n(()=>[e[27]||(e[27]=f(" 批量操作 ",-1))]),_:1})]),_:1})])]),h.value==="card"?(y(),F("div",Nt,[(y(!0),F(oe,null,ve(u(r).gameTokens,o=>(y(),z(Le,{key:o.id,class:ge({"token-card":!0,active:u(ee)===o.id}),onClick:B=>D(o)},{title:n(()=>[s(Oe,{class:"token-name"},{default:n(()=>[f(U(o.name)+" ",1),o.server?(y(),z(Re,{key:0,color:"red"},{default:n(()=>[f(U(o.server),1)]),_:2},1024)):M("",!0),s(pe,{status:re(o.id),text:le(o.id)},null,8,["status","text"])]),_:2},1024)]),extra:n(()=>[s(Z,{options:ie(o),onSelect:B=>ue(B,o)},{default:n(()=>[s(C,{text:""},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(Te))]),_:1})]),_:1})]),_:1},8,["options","onSelect"])]),default:n(()=>[c("div",Rt,[e[28]||(e[28]=c("span",{class:"token-label"},"Token:",-1)),c("code",Ot,U(Ee(o.token)),1)]),s(fe,{loading:N.value.has(o.id),onClick:V(B=>I(o),["stop"])},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(te))]),_:1})]),default:n(()=>[f(" "+U(o.sourceUrl?"刷新":"重新获取"),1)]),_:2},1032,["loading","onClick"]),c("div",Lt,[c("div",Ft,[e[29]||(e[29]=c("span",{class:"timestamp-label"},"创建：",-1)),c("span",Pt,U(ce(o.createdAt)),1)]),c("div",Wt,[e[30]||(e[30]=c("span",{class:"timestamp-label"},"使用：",-1)),c("span",jt,U(ce(o.lastUsed)),1)])]),c("div",It,[c("div",Dt,[e[31]||(e[31]=c("span",{class:"storage-label"},"存储类型：",-1)),s(K,{size:"small",type:o.importMethod==="url"?"success":"warning"},{default:n(()=>[f(U(o.importMethod==="url"?"长期有效":"临时存储"),1)]),_:2},1032,["type"])]),o.importMethod!=="url"?(y(),F("div",Vt,[s(C,{size:"tiny",type:"success",ghost:"",onClick:V(B=>G(o),["stop"])},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(yt))]),_:1})]),default:n(()=>[e[32]||(e[32]=f(" 升级为长期有效 ",-1))]),_:1},8,["onClick"])])):M("",!0)])]),actions:n(()=>[s(C,{type:"primary",size:"large",block:"",loading:O.value.has(o.id),onClick:B=>de(o)},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(Q))]),_:1})]),default:n(()=>[e[33]||(e[33]=f(" 开始任务管理 ",-1))]),_:1},8,["loading","onClick"])]),_:2},1032,["class","onClick"]))),128))])):(y(),F("div",Gt,[(y(!0),F(oe,null,ve(u(r).gameTokens,o=>(y(),z(Fe,{key:o.id,size:"small",style:{"margin-bottom":"8px"},hoverable:"",onClick:B=>D(o),class:ge({active:u(ee)===o.id})},{default:n(()=>[s(L,{justify:"space-between",align:"center"},{default:n(()=>[s(L,{align:"center",size:24},{default:n(()=>[c("div",Ht,[c("span",qt,U(o.name),1),o.server?(y(),z(K,{key:0,size:"small",type:"error"},{default:n(()=>[f(U(o.server),1)]),_:2},1024)):M("",!0)]),c("div",Jt,[s(pe,{status:re(o.id),text:le(o.id)},null,8,["status","text"])]),s(K,{size:"small",type:o.importMethod==="url"?"success":"warning"},{default:n(()=>[f(U(o.importMethod==="url"?"长期":"临时"),1)]),_:2},1032,["type"])]),_:2},1024),s(L,null,{default:n(()=>[s(C,{size:"small",type:"primary",loading:O.value.has(o.id),onClick:V(B=>de(o),["stop"])},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(Q))]),_:1})]),default:n(()=>[e[34]||(e[34]=f(" 管理 ",-1))]),_:1},8,["loading","onClick"]),s(C,{size:"small",onClick:V(B=>I(o),["stop"]),loading:N.value.has(o.id)},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(te))]),_:1})]),default:n(()=>[e[35]||(e[35]=f(" 刷新 ",-1))]),_:1},8,["onClick","loading"]),s(Z,{options:ie(o),onSelect:B=>ue(B,o)},{default:n(()=>[s(C,{size:"small",circle:"",onClick:e[10]||(e[10]=V(()=>{},["stop"]))},{icon:n(()=>[s(u(b),null,{default:n(()=>[s(u(Te))]),_:1})]),_:1})]),_:1},8,["options","onSelect"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]))])):M("",!0),!u(r).hasTokens&&!v.value?(y(),z(Pe,{key:1},{image:n(()=>[...e[36]||(e[36]=[c("i",{class:"mdi:bed-empty"},null,-1)])]),default:n(()=>[e[38]||(e[38]=f(" 还没有导入任何Token ",-1)),s(fe,{type:"link",onClick:P},{default:n(()=>[...e[37]||(e[37]=[f("打开Token管理",-1)])]),_:1})]),_:1})):M("",!0)]),s(je,{show:_.value,"onUpdate:show":e[16]||(e[16]=o=>_.value=o),preset:"card",title:"编辑Token",style:{width:"500px"}},{footer:n(()=>[c("div",Xt,[s(C,{onClick:e[15]||(e[15]=o=>_.value=!1)},{default:n(()=>[...e[39]||(e[39]=[f(" 取消 ",-1)])]),_:1}),s(C,{type:"primary",onClick:Se},{default:n(()=>[...e[40]||(e[40]=[f(" 保存 ",-1)])]),_:1})])]),default:n(()=>[s(We,{ref_key:"editFormRef",ref:w,model:m,rules:R,"label-placement":"left","label-width":"80px"},{default:n(()=>[s(X,{label:"名称",path:"name"},{default:n(()=>[s(J,{value:m.name,"onUpdate:value":e[11]||(e[11]=o=>m.name=o)},null,8,["value"])]),_:1}),s(X,{label:"Token字符串",path:"token"},{default:n(()=>[s(J,{value:m.token,"onUpdate:value":e[12]||(e[12]=o=>m.token=o),type:"textarea",rows:3,placeholder:"粘贴Token字符串...",clearable:""},null,8,["value"])]),_:1}),s(X,{label:"服务器"},{default:n(()=>[s(J,{value:m.server,"onUpdate:value":e[13]||(e[13]=o=>m.server=o)},null,8,["value"])]),_:1}),s(X,{label:"WebSocket地址"},{default:n(()=>[s(J,{value:m.wsUrl,"onUpdate:value":e[14]||(e[14]=o=>m.wsUrl=o)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])])}}},vs=ot(Yt,[["__scopeId","data-v-08ed75cc"]]);export{vs as default};
